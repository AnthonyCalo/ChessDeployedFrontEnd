{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acalo\\\\Desktop\\\\devProjects\\\\ChessFrontDeploy\\\\src\\\\components\\\\ChessBoard.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Modal } from 'react-bootstrap';\nimport GameModal from \"./Modal\";\nimport Square from \"./square\";\nimport gameRef from \"../game/legalmove\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar pieceType;\n\n(function (pieceType) {\n  pieceType[pieceType[\"PAWN\"] = 0] = \"PAWN\";\n  pieceType[pieceType[\"KNIGHT\"] = 1] = \"KNIGHT\";\n  pieceType[pieceType[\"BISHOP\"] = 2] = \"BISHOP\";\n  pieceType[pieceType[\"ROOK\"] = 3] = \"ROOK\";\n  pieceType[pieceType[\"QUEEN\"] = 4] = \"QUEEN\";\n  pieceType[pieceType[\"KING\"] = 5] = \"KING\";\n})(pieceType || (pieceType = {}));\n\nvar Color;\n\n(function (Color) {\n  Color[Color[\"WHITE\"] = 0] = \"WHITE\";\n  Color[Color[\"BLACK\"] = 1] = \"BLACK\";\n})(Color || (Color = {}));\n\nlet gameBeginAudio = new Audio(\"/sound/start.mp3\");\nlet moveSound = new Audio('/sound/move_sound.mp3');\nconst verticalAxis = [\"8\", \"7\", \"6\", \"5\", \"4\", \"3\", \"2\", \"1\"];\nconst horizontalAxis = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"];\nconst startingPieces = [];\n\nfor (var i = 0; i < 8; i++) {\n  startingPieces.push({\n    image: \"pieces/Wpawn.png\",\n    rank: \"2\",\n    file: horizontalAxis[i],\n    type: pieceType.PAWN,\n    color: Color.WHITE\n  });\n}\n\nfor (i = 0; i < 8; i++) {\n  startingPieces.push({\n    image: \"pieces/Bpawn.png\",\n    rank: \"7\",\n    file: horizontalAxis[i],\n    type: pieceType.PAWN,\n    color: Color.BLACK\n  });\n}\n\nstartingPieces.push({\n  image: \"pieces/Wrook.png\",\n  rank: \"1\",\n  file: \"a\",\n  type: pieceType.ROOK,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Wrook.png\",\n  rank: \"1\",\n  file: \"h\",\n  type: pieceType.ROOK,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Brook.png\",\n  rank: \"8\",\n  file: \"a\",\n  type: pieceType.ROOK,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Brook.png\",\n  rank: \"8\",\n  file: \"h\",\n  type: pieceType.ROOK,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Wknight.png\",\n  rank: \"1\",\n  file: \"b\",\n  type: pieceType.KNIGHT,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Wknight.png\",\n  rank: \"1\",\n  file: \"g\",\n  type: pieceType.KNIGHT,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Wbishop.png\",\n  rank: \"1\",\n  file: \"c\",\n  type: pieceType.BISHOP,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Wbishop.png\",\n  rank: \"1\",\n  file: \"f\",\n  type: pieceType.BISHOP,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Bknight.png\",\n  rank: \"8\",\n  file: \"b\",\n  type: pieceType.KNIGHT,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Bknight.png\",\n  rank: \"8\",\n  file: \"g\",\n  type: pieceType.KNIGHT,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Bbishop.png\",\n  rank: \"8\",\n  file: \"c\",\n  type: pieceType.BISHOP,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Bbishop.png\",\n  rank: \"8\",\n  file: \"f\",\n  type: pieceType.BISHOP,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Wqueen.png\",\n  rank: '1',\n  file: \"d\",\n  type: pieceType.QUEEN,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Wking.png\",\n  rank: '1',\n  file: \"e\",\n  type: pieceType.KING,\n  color: Color.WHITE\n});\nstartingPieces.push({\n  image: \"pieces/Bqueen.png\",\n  rank: '8',\n  file: \"d\",\n  type: pieceType.QUEEN,\n  color: Color.BLACK\n});\nstartingPieces.push({\n  image: \"pieces/Bking.png\",\n  rank: '8',\n  file: \"e\",\n  type: pieceType.KING,\n  color: Color.BLACK\n});\nvar oldGamePosition = [];\n\nfunction ChessBoardMovesAlready(props) {\n  _s();\n\n  const referee = new gameRef();\n  const [pieces, setPieces] = useState(startingPieces);\n  const [turn, setTurn] = useState(0);\n  const [userMovesEngine, setUME] = useState([]);\n  const [moveCount, setMoveCount] = useState(0);\n  const [takenPieces, setTaken] = useState([]); //props for modal\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [before_end, setBeforeEnd] = useState(false);\n\n  function closeModal() {\n    setModalOpen(false);\n  }\n\n  const movesList = props.movesList; //says whether or not user moved a piece\n  //important for setting board back to old position\n\n  const [playerMoves, setPM] = useState(false); //for after player moves set back turn\n\n  function setMove(moveNum) {\n    setMoveCount(moveNum);\n    props.setMove(moveNum);\n  } //passuser moves to the engine\n\n\n  useEffect(() => {\n    props.passToEngine(userMovesEngine);\n  });\n  useEffect(() => {\n    gameBeginAudio.play();\n    props.passToEngine([]);\n  }, []);\n  const boardRef = useRef(null);\n  let activePiece = null;\n\n  const grabPiece = function (event) {\n    const element = event.target; //const currSquare = element.parentNode.id;\n\n    const chessboard = boardRef.current;\n\n    if (chessboard) {\n      let currentRank = verticalAxis[Math.floor((event.clientY - (chessboard === null || chessboard === void 0 ? void 0 : chessboard.offsetTop)) / 94)];\n      let currentFile = horizontalAxis[Math.floor((event.clientX - (chessboard === null || chessboard === void 0 ? void 0 : chessboard.offsetLeft)) / 94)];\n      let currentPiece = pieces.find(p => p.file === currentFile && p.rank === currentRank);\n\n      if (element.classList.contains(\"chess-piece\")) {\n        element.style.position = \"absolute\";\n        activePiece = element;\n      }\n    }\n  };\n\n  function movePiece(event) {\n    const board = boardRef.current;\n\n    if (activePiece && board) {\n      const boardSideLeft = board.offsetLeft;\n      const boardTop = board.offsetTop;\n      const boardSideRight = boardSideLeft + board.clientWidth - 70;\n      const boardBottom = boardTop + board.clientHeight - 70;\n      activePiece.style.position = \"absolute\";\n      const x = event.clientX - 47;\n      const y = event.clientY - 47; //series of if else if keeps piece movement within boards area\n      //1st if else if is horizontally and second is vertically\n\n      if (x < boardSideLeft) {\n        activePiece.style.left = `${boardSideLeft}px`;\n      } else if (x > boardSideRight) {\n        activePiece.style.left = `${boardSideRight}px`;\n      } else {\n        activePiece.style.left = `${x}px`;\n      }\n\n      if (y < boardTop) {\n        activePiece.style.top = `${boardTop}px`;\n      } else if (y > boardBottom) {\n        activePiece.style.top = `${boardBottom}px`;\n      } else {\n        activePiece.style.top = `${y}px`;\n      }\n    }\n  }\n\n  function placePiece(event) {\n    const chessboard = boardRef.current;\n\n    if (playerMoves === false) {\n      setPM(true); //pushing each piece into a new piece Array\n      //it stores the games position before the player moves the pieces. Required to put pieces back\n      //newArray=pieces won't work beauase it will not be a pass by reference not pass by value\n\n      pieces.forEach(piece => {\n        const oldPiece = {\n          image: piece.image,\n          rank: piece.rank,\n          file: piece.file,\n          type: piece.type,\n          color: piece.color\n        };\n        oldGamePosition.push(oldPiece);\n      });\n    }\n\n    var validMove = false; //needed to check if a move is okay\n\n    if (chessboard) {\n      var _activePiece;\n\n      var newRank = verticalAxis[Math.floor((event.clientY - (chessboard === null || chessboard === void 0 ? void 0 : chessboard.offsetTop)) / 94)]; //this gets the new square based on where I release the mouse\n\n      var newFile = horizontalAxis[Math.floor((event.clientX - (chessboard === null || chessboard === void 0 ? void 0 : chessboard.offsetLeft)) / 94)];\n      var newSquare = newFile + newRank;\n      const parent = (_activePiece = activePiece) === null || _activePiece === void 0 ? void 0 : _activePiece.parentElement; //needed to get original square. Need square to find the original piece on square\n\n      var currentPiece = pieces.find(p => p.file === (parent === null || parent === void 0 ? void 0 : parent.id[0]) && p.rank === parent.id[1]); //var rightTurn = currentPiece?.color===turn; //checks if players turn\n\n      var attackedPiece = pieces.find(p => p.file === newFile && p.rank === newRank);\n\n      if (currentPiece) {\n        validMove = referee.isValidMove(parent === null || parent === void 0 ? void 0 : parent.id, newSquare, currentPiece === null || currentPiece === void 0 ? void 0 : currentPiece.type, currentPiece === null || currentPiece === void 0 ? void 0 : currentPiece.color, pieces);\n      }\n\n      if ((currentPiece === null || currentPiece === void 0 ? void 0 : currentPiece.type) === 5 && validMove) {\n        if (newSquare === \"g1\" && validMove) {\n          castle(\"WK\");\n          setTurn(turn === 0 ? 1 : 0);\n        } else if (newSquare === \"c1\" && validMove) {\n          castle(\"WQ\");\n          setTurn(turn === 0 ? 1 : 0);\n        } else if (newSquare === \"g8\" && validMove) {\n          castle(\"BK\");\n          setTurn(turn === 0 ? 1 : 0);\n        } else if (newSquare === \"c8\" && validMove) {\n          castle(\"BQ\");\n          setTurn(turn === 0 ? 1 : 0);\n        }\n      }\n\n      if (attackedPiece && validMove) {\n        //console.log(\"here attacking\")\n        const attackSquare = (attackedPiece === null || attackedPiece === void 0 ? void 0 : attackedPiece.file) + attackedPiece.rank;\n        setPieces(value => {\n          const piecesMinusOne = value.reduce((results, piece) => {\n            const pieceSquare = piece.file + piece.rank;\n\n            if (pieceSquare !== attackSquare) {\n              results.push(piece);\n            }\n\n            return results;\n          }, []);\n          moveSound.play();\n          return piecesMinusOne;\n        });\n      }\n\n      setPieces(prev => {\n        const pieces = prev.map(selectPiece => {\n          var _activePiece2;\n\n          const parent = (_activePiece2 = activePiece) === null || _activePiece2 === void 0 ? void 0 : _activePiece2.parentElement;\n\n          if (validMove && parent && selectPiece.file === parent.id[0] && selectPiece.rank === parent.id[1]) {\n            var moveEngine = parent.id + newSquare;\n            setUME([...userMovesEngine, moveEngine]); //if the moves valid take the piece on current parent square\n            //then give that piece a new rank/ file\n\n            selectPiece.rank = newRank;\n            selectPiece.file = newFile;\n            setTurn(turn === 0 ? 1 : 0);\n          } else {\n            var _activePiece3, _activePiece4;\n\n            (_activePiece3 = activePiece) === null || _activePiece3 === void 0 ? void 0 : _activePiece3.style.removeProperty(\"top\");\n            (_activePiece4 = activePiece) === null || _activePiece4 === void 0 ? void 0 : _activePiece4.style.removeProperty(\"left\");\n          }\n\n          moveSound.play();\n          return selectPiece;\n        });\n        activePiece = null;\n        return pieces;\n      });\n    }\n  } //Castle function basically moves two pieces the rook and king\n  //has to be a seperate function than normal one piece move functin\n\n\n  function castle(newSquare) {\n    let oldKingSquare = \"\";\n    let newKingSquare = \"\";\n    let oldRookSquare = \"\";\n    let newRookSquare = \"\";\n\n    if (newSquare === \"WK\") {\n      oldKingSquare = \"e1\";\n      newKingSquare = \"g1\";\n      oldRookSquare = \"h1\";\n      newRookSquare = \"f1\";\n    } else if (newSquare === \"BK\") {\n      oldKingSquare = \"e8\";\n      newKingSquare = \"g8\";\n      oldRookSquare = \"h8\";\n      newRookSquare = \"f8\";\n    } else if (newSquare === \"BQ\") {\n      oldKingSquare = \"e8\";\n      newKingSquare = \"c8\";\n      oldRookSquare = \"a8\";\n      newRookSquare = \"d8\";\n    } else if (newSquare === \"WQ\") {\n      oldKingSquare = \"e1\";\n      newKingSquare = \"c1\";\n      oldRookSquare = \"a1\";\n      newRookSquare = \"d1\";\n    }\n\n    setPieces(prev => {\n      const pieces = prev.map(selectPiece => {\n        if (selectPiece.file === oldKingSquare[0] && selectPiece.rank === oldKingSquare[1]) {\n          selectPiece.rank = newKingSquare[1];\n          selectPiece.file = newKingSquare[0];\n        } else if (selectPiece.file === oldRookSquare[0] && selectPiece.rank === oldRookSquare[1]) {\n          selectPiece.rank = newRookSquare[1];\n          selectPiece.file = newRookSquare[0];\n        }\n\n        return selectPiece;\n      });\n      return pieces;\n    });\n  }\n\n  function castleBack(newSquare) {\n    let oldKingSquare = \"\";\n    let newKingSquare = \"\";\n    let oldRookSquare = \"\";\n    let newRookSquare = \"\";\n\n    if (newSquare === \"WK\") {\n      oldKingSquare = \"g1\";\n      newKingSquare = \"e1\";\n      oldRookSquare = \"f1\";\n      newRookSquare = \"h1\";\n    } else if (newSquare === \"BK\") {\n      oldKingSquare = \"g8\";\n      newKingSquare = \"e8\";\n      oldRookSquare = \"f8\";\n      newRookSquare = \"h8\";\n    } else if (newSquare === \"BQ\") {\n      oldKingSquare = \"c8\";\n      newKingSquare = \"e8\";\n      oldRookSquare = \"d8\";\n      newRookSquare = \"a8\";\n    } else if (newSquare === \"WQ\") {\n      oldKingSquare = \"c1\";\n      newKingSquare = \"e1\";\n      oldRookSquare = \"d1\";\n      newRookSquare = \"a1\";\n    }\n\n    setPieces(prev => {\n      const pieces = prev.map(selectPiece => {\n        //castle 1st if moves the king and second moves rook\n        if (selectPiece.file === oldKingSquare[0] && selectPiece.rank === oldKingSquare[1]) {\n          selectPiece.rank = newKingSquare[1];\n          selectPiece.file = newKingSquare[0];\n        } else if (selectPiece.file === oldRookSquare[0] && selectPiece.rank === oldRookSquare[1]) {\n          selectPiece.rank = newRookSquare[1];\n          selectPiece.file = newRookSquare[0];\n        }\n\n        return selectPiece;\n      });\n      return pieces;\n    });\n  } // function moveAnimation(oldSquare: string, newSquare: string){\n  //     let os = document.getElementById(oldSquare);\n  //     let ns = document.getElementById(newSquare);\n  //     var oldPiece = os?.getElementsByClassName(\"chess-piece\") as HTMLCollectionOf<HTMLElement>;;\n  //      oldPiece[0].style.position=\"absolute\";\n  //     console.log(oldPiece[0].style.position);\n  //     return true;\n  // }\n\n\n  function moveWithAn(move) {\n    setMove(moveCount + 1);\n    setTimeout(() => {\n      movePieceGame(move);\n    }, 1500);\n    const id = move[0][0] + move[0][1];\n    const newid = move[1][0] + move[1][1];\n    let beforeSquare = document.getElementById(id);\n    let newSquare = document.getElementById(newid);\n\n    if (beforeSquare && newSquare) {\n      console.log(getComputedStyle(beforeSquare).bottom);\n      console.log(getComputedStyle(newSquare).left);\n    }\n  }\n\n  function movePieceGame(move) {\n    //set pieces to old game position from saved oldGamePosition variable\n    if (playerMoves) {\n      setPieces(oldGamePosition);\n      setPM(false);\n      oldGamePosition = [];\n      setUME([]);\n    }\n\n    moveSound.play(); //if(movesList[moveCount+1][0]===\"gameOver\"){\n\n    if (move[0] === \"gameOver\") {\n      //end of game. BeforeEnd shows this is the end game modal\n      setBeforeEnd(true);\n      setModalOpen(true);\n    } else if (move[0] === \"castle\") {\n      castle(move[1]);\n      setTurn(turn === 0 ? 1 : 0);\n    } else {\n      //regular move not castle or game over\n      const chessboard = boardRef.current;\n\n      if (chessboard) {\n        var attackedPiece = pieces.find(p => p.file === move[1][0] && p.rank === move[1][1]); //moveAnimation(move[0], newSquare);\n\n        if (attackedPiece) {\n          //console.log(\"here attacking\")\n          var taken = {\n            piece: attackedPiece,\n            moveNumber: moveCount\n          };\n          setTaken(prev => {\n            return [...prev, taken];\n          });\n          const attackSquare = (attackedPiece === null || attackedPiece === void 0 ? void 0 : attackedPiece.file) + attackedPiece.rank;\n          setPieces(value => {\n            const piecesMinusOne = value.reduce((results, piece) => {\n              const pieceSquare = piece.file + piece.rank;\n\n              if (pieceSquare !== attackSquare) {\n                results.push(piece);\n              }\n\n              return results;\n            }, []);\n            return piecesMinusOne;\n          });\n        }\n\n        setPieces(prev => {\n          const pieces = prev.map(selectPiece => {\n            if (selectPiece.file === move[0][0] && selectPiece.rank === move[0][1]) {\n              if (selectPiece.type == 0 && (move[1][1] == '8' && selectPiece.color == 0 || move[1][1] === '1' && selectPiece.color == 1)) {\n                selectPiece.type = 4;\n                selectPiece.image = \"pieces/Bqueen.png\";\n              }\n\n              selectPiece.rank = move[1][1];\n              selectPiece.file = move[1][0];\n              setTurn(turn === 0 ? 1 : 0);\n            }\n\n            return selectPiece;\n          });\n          return pieces;\n        });\n      }\n    } //else close. else meaning it isn't a castle move\n\n  } //movePieceGame close\n  //called with backbutton moves back a game move\n\n\n  function setbackMove() {\n    setMove(moveCount - 1);\n    setTimeout(function () {}, 200);\n  }\n\n  function movePieceBack() {\n    const move = movesList[moveCount - 1];\n    const chessboard = boardRef.current;\n    moveSound.play(); //first checks if user moved pieces from game.\n    //same as move forward function\n\n    if (playerMoves) {\n      setPieces(oldGamePosition);\n      setUME([]);\n      setPM(false);\n      oldGamePosition = [];\n    } //set the move count back to do the opposite move\n    //function is almost the same as forward function but new and old squares flipped\n\n\n    if (moveCount === 0 || moveCount < 0) {\n      setModalOpen(true);\n      setBeforeEnd(false);\n      setMove(0);\n    } else if (move[0] === \"castle\") {\n      castleBack(move[1]);\n      setTurn(turn === 0 ? 1 : 0);\n    } else {\n      //not reverting a castle or going back from 0. normal  back move    \n      if (chessboard) {\n        setPieces(prev => {\n          const pieces = prev.map(selectPiece => {\n            if (selectPiece.file === move[1][0] && selectPiece.rank === move[1][1]) {\n              selectPiece.rank = move[0][1];\n              selectPiece.file = move[0][0];\n              setTurn(turn === 0 ? 1 : 0);\n            }\n\n            return selectPiece;\n          });\n          return pieces;\n        });\n        var tookPiece = takenPieces.find(take => take.moveNumber === moveCount - 1);\n\n        if (tookPiece) {\n          setPieces(prev => {\n            return [...prev, tookPiece === null || tookPiece === void 0 ? void 0 : tookPiece.piece];\n          });\n        }\n      }\n    }\n  }\n\n  let board = [];\n  let counter = 0; //nested loop to create board w/ black/white squares\n  //j is x and i is Y\n\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      if (j === 0) {\n        counter++;\n      }\n\n      let position = horizontalAxis[j] + verticalAxis[i];\n      let image = \"\";\n      pieces.forEach(function (piece) {\n        //if a pieces position is equal to a square pass that piece into square creation\n        //image is either \"\" blank or has the URL of a piece.image\n        if (piece.file === position[0] && piece.rank === position[1]) {\n          image = piece.image; //return;\n        }\n      });\n      board.push( /*#__PURE__*/_jsxDEV(Square, {\n        number: counter,\n        image: image,\n        sText: position\n      }, position, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 24\n      }, this));\n      counter++;\n    } //ends second for loop\n\n  } //ends first for loop\n  //putting pieces in the squares\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"boardDiv\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chessBoard\",\n        onMouseMove: event => movePiece(event),\n        onMouseDown: event => grabPiece(event),\n        onMouseUp: event => placePiece(event),\n        ref: boardRef,\n        children: board\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"belowButtons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"backBtn\",\n        className: \"backBtn moveBtn\",\n        onClick: () => {\n          setbackMove();\n          movePieceBack();\n        },\n        children: \"Move back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"boardReset\",\n        className: \"moveBtn\",\n        onClick: () => window.location.reload(),\n        children: \"Reset Board\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"nextBtn\",\n        className: \"nextBtn moveBtn\",\n        onClick: () => {\n          moveWithAn(movesList[moveCount]);\n        },\n        children: \"Next Move\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: modalOpen,\n      size: \"lg\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      children: before_end ? /*#__PURE__*/_jsxDEV(GameModal, {\n        closeModal: setModalOpen,\n        text: props.gameover\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(GameModal, {\n        closeModal: setModalOpen,\n        text: \"Can't move back from move 0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 75\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n} //closes chessboard\n\n\n_s(ChessBoardMovesAlready, \"8Q1YpNNSvW4ZHZSRcW0Bn2Eit/M=\");\n\n_c = ChessBoardMovesAlready;\nexport default ChessBoardMovesAlready;\nexport { pieceType, Color };\n\nvar _c;\n\n$RefreshReg$(_c, \"ChessBoardMovesAlready\");","map":{"version":3,"sources":["C:/Users/acalo/Desktop/devProjects/ChessFrontDeploy/src/components/ChessBoard.tsx"],"names":["React","useState","useEffect","useRef","Modal","GameModal","Square","gameRef","pieceType","Color","gameBeginAudio","Audio","moveSound","verticalAxis","horizontalAxis","startingPieces","i","push","image","rank","file","type","PAWN","color","WHITE","BLACK","ROOK","KNIGHT","BISHOP","QUEEN","KING","oldGamePosition","ChessBoardMovesAlready","props","referee","pieces","setPieces","turn","setTurn","userMovesEngine","setUME","moveCount","setMoveCount","takenPieces","setTaken","modalOpen","setModalOpen","before_end","setBeforeEnd","closeModal","movesList","playerMoves","setPM","setMove","moveNum","passToEngine","play","boardRef","activePiece","grabPiece","event","element","target","chessboard","current","currentRank","Math","floor","clientY","offsetTop","currentFile","clientX","offsetLeft","currentPiece","find","p","classList","contains","style","position","movePiece","board","boardSideLeft","boardTop","boardSideRight","clientWidth","boardBottom","clientHeight","x","y","left","top","placePiece","forEach","piece","oldPiece","validMove","newRank","newFile","newSquare","parent","parentElement","id","attackedPiece","isValidMove","castle","attackSquare","value","piecesMinusOne","reduce","results","pieceSquare","prev","map","selectPiece","moveEngine","removeProperty","oldKingSquare","newKingSquare","oldRookSquare","newRookSquare","castleBack","moveWithAn","move","setTimeout","movePieceGame","newid","beforeSquare","document","getElementById","console","log","getComputedStyle","bottom","taken","moveNumber","setbackMove","movePieceBack","tookPiece","take","counter","j","window","location","reload","gameover"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,MAApC,QAAiD,OAAjD;AACA,SAASC,KAAT,QAAqB,iBAArB;AACA,OAAOC,SAAP,MAAsB,SAAtB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,OAAP,MAAoB,mBAApB;;;IAEKC,S;;WAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;GAAAA,S,KAAAA,S;;IASAC,K;;WAAAA,K;AAAAA,EAAAA,K,CAAAA,K;AAAAA,EAAAA,K,CAAAA,K;GAAAA,K,KAAAA,K;;AAkBL,IAAIC,cAAc,GAAG,IAAIC,KAAJ,CAAU,kBAAV,CAArB;AACA,IAAIC,SAAS,GAAG,IAAID,KAAJ,CAAU,uBAAV,CAAhB;AAEA,MAAME,YAAY,GAAG,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,EAAsB,GAAtB,EAA0B,GAA1B,EAA8B,GAA9B,CAArB;AACA,MAAMC,cAAc,GAAG,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,EAAqB,GAArB,EAAyB,GAAzB,EAA6B,GAA7B,CAAvB;AAEA,MAAMC,cAAuB,GAAG,EAAhC;;AACA,KAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,CAAf,EAAkBA,CAAC,EAAnB,EAAsB;AAClBD,EAAAA,cAAc,CAACE,IAAf,CAAoB;AAACC,IAAAA,KAAK,EAAE,kBAAR;AAA4BC,IAAAA,IAAI,EAAE,GAAlC;AAAuCC,IAAAA,IAAI,EAAEN,cAAc,CAACE,CAAD,CAA3D;AAAgEK,IAAAA,IAAI,EAAEb,SAAS,CAACc,IAAhF;AAAsFC,IAAAA,KAAK,EAAEd,KAAK,CAACe;AAAnG,GAApB;AACH;;AACD,KAAIR,CAAC,GAAC,CAAN,EAASA,CAAC,GAAC,CAAX,EAAcA,CAAC,EAAf,EAAkB;AACdD,EAAAA,cAAc,CAACE,IAAf,CAAoB;AAACC,IAAAA,KAAK,EAAE,kBAAR;AAA4BC,IAAAA,IAAI,EAAE,GAAlC;AAAuCC,IAAAA,IAAI,EAAEN,cAAc,CAACE,CAAD,CAA3D;AAAgEK,IAAAA,IAAI,EAAEb,SAAS,CAACc,IAAhF;AAAsFC,IAAAA,KAAK,EAAEd,KAAK,CAACgB;AAAnG,GAApB;AACH;;AAEDV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,kBAAR;AAA4BC,EAAAA,IAAI,EAAE,GAAlC;AAAuCC,EAAAA,IAAI,EAAE,GAA7C;AAAkDC,EAAAA,IAAI,EAAEb,SAAS,CAACkB,IAAlE;AAAwEH,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAArF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,kBAAR;AAA4BC,EAAAA,IAAI,EAAE,GAAlC;AAAuCC,EAAAA,IAAI,EAAE,GAA7C;AAAkDC,EAAAA,IAAI,EAAEb,SAAS,CAACkB,IAAlE;AAAwEH,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAArF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,kBAAR;AAA4BC,EAAAA,IAAI,EAAE,GAAlC;AAAuCC,EAAAA,IAAI,EAAE,GAA7C;AAAkDC,EAAAA,IAAI,EAAEb,SAAS,CAACkB,IAAlE;AAAwEH,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAArF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,kBAAR;AAA4BC,EAAAA,IAAI,EAAE,GAAlC;AAAuCC,EAAAA,IAAI,EAAE,GAA7C;AAAkDC,EAAAA,IAAI,EAAEb,SAAS,CAACkB,IAAlE;AAAwEH,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAArF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACmB,MAApE;AAA4EJ,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAAzF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACmB,MAApE;AAA4EJ,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAAzF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACoB,MAApE;AAA4EL,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAAzF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACoB,MAApE;AAA4EL,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAAzF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACmB,MAApE;AAA4EJ,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAAzF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACmB,MAApE;AAA4EJ,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAAzF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACoB,MAApE;AAA4EL,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAAzF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,oBAAR;AAA8BC,EAAAA,IAAI,EAAE,GAApC;AAAyCC,EAAAA,IAAI,EAAE,GAA/C;AAAoDC,EAAAA,IAAI,EAAEb,SAAS,CAACoB,MAApE;AAA4EL,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAAzF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,mBAAR;AAA6BC,EAAAA,IAAI,EAAE,GAAnC;AAAwCC,EAAAA,IAAI,EAAE,GAA9C;AAAmDC,EAAAA,IAAI,EAAEb,SAAS,CAACqB,KAAnE;AAA0EN,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAAvF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,kBAAR;AAA4BC,EAAAA,IAAI,EAAE,GAAlC;AAAuCC,EAAAA,IAAI,EAAE,GAA7C;AAAkDC,EAAAA,IAAI,EAAEb,SAAS,CAACsB,IAAlE;AAAwEP,EAAAA,KAAK,EAAEd,KAAK,CAACe;AAArF,CAApB;AACAT,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,mBAAR;AAA6BC,EAAAA,IAAI,EAAE,GAAnC;AAAwCC,EAAAA,IAAI,EAAE,GAA9C;AAAmDC,EAAAA,IAAI,EAAEb,SAAS,CAACqB,KAAnE;AAA0EN,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAAvF,CAApB;AACAV,cAAc,CAACE,IAAf,CAAoB;AAACC,EAAAA,KAAK,EAAE,kBAAR;AAA4BC,EAAAA,IAAI,EAAE,GAAlC;AAAuCC,EAAAA,IAAI,EAAE,GAA7C;AAAkDC,EAAAA,IAAI,EAAEb,SAAS,CAACsB,IAAlE;AAAwEP,EAAAA,KAAK,EAAEd,KAAK,CAACgB;AAArF,CAApB;AAGA,IAAIM,eAAwB,GAAG,EAA/B;;AACA,SAASC,sBAAT,CAAgCC,KAAhC,EAA2C;AAAA;;AAEvC,QAAMC,OAAO,GAAG,IAAI3B,OAAJ,EAAhB;AACA,QAAM,CAAC4B,MAAD,EAASC,SAAT,IAAsBnC,QAAQ,CAAUc,cAAV,CAApC;AACA,QAAM,CAACsB,IAAD,EAAOC,OAAP,IAAkBrC,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAM,CAACsC,eAAD,EAAkBC,MAAlB,IAA4BvC,QAAQ,CAAW,EAAX,CAA1C;AACA,QAAM,CAACwC,SAAD,EAAYC,YAAZ,IAA4BzC,QAAQ,CAAC,CAAD,CAA1C;AACA,QAAM,CAAC0C,WAAD,EAAcC,QAAd,IAAwB3C,QAAQ,CAAe,EAAf,CAAtC,CAPuC,CAQvC;;AACA,QAAM,CAAC4C,SAAD,EAAYC,YAAZ,IAA2B7C,QAAQ,CAAC,KAAD,CAAzC;AACA,QAAM,CAAC8C,UAAD,EAAaC,YAAb,IAA2B/C,QAAQ,CAAC,KAAD,CAAzC;;AACA,WAASgD,UAAT,GAAqB;AACjBH,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;;AACD,QAAMI,SAAS,GAAGjB,KAAK,CAACiB,SAAxB,CAduC,CAevC;AACA;;AACA,QAAM,CAACC,WAAD,EAAcC,KAAd,IAAuBnD,QAAQ,CAAC,KAAD,CAArC,CAjBuC,CAkBvC;;AAEA,WAASoD,OAAT,CAAiBC,OAAjB,EAA8B;AAC1BZ,IAAAA,YAAY,CAACY,OAAD,CAAZ;AACArB,IAAAA,KAAK,CAACoB,OAAN,CAAcC,OAAd;AACH,GAvBsC,CAwBvC;;;AACApD,EAAAA,SAAS,CAAC,MAAI;AACV+B,IAAAA,KAAK,CAACsB,YAAN,CAAmBhB,eAAnB;AAEH,GAHQ,CAAT;AAIArC,EAAAA,SAAS,CAAC,MAAI;AACVQ,IAAAA,cAAc,CAAC8C,IAAf;AACAvB,IAAAA,KAAK,CAACsB,YAAN,CAAmB,EAAnB;AACH,GAHQ,EAGN,EAHM,CAAT;AAKA,QAAME,QAAQ,GAAGtD,MAAM,CAAiB,IAAjB,CAAvB;AAEA,MAAIuD,WAA+B,GAAG,IAAtC;;AAEA,QAAMC,SAAS,GAAG,UAASC,KAAT,EAAoB;AAClC,UAAMC,OAAO,GAAGD,KAAK,CAACE,MAAtB,CADkC,CAElC;;AACA,UAAMC,UAAU,GAAGN,QAAQ,CAACO,OAA5B;;AACA,QAAID,UAAJ,EAAe;AACX,UAAIE,WAAW,GAAGpD,YAAY,CAACqD,IAAI,CAACC,KAAL,CAAW,CAACP,KAAK,CAACQ,OAAN,IAAeL,UAAf,aAAeA,UAAf,uBAAeA,UAAU,CAAEM,SAA3B,CAAD,IAAyC,EAApD,CAAD,CAA9B;AACA,UAAIC,WAAW,GAAGxD,cAAc,CAACoD,IAAI,CAACC,KAAL,CAAW,CAACP,KAAK,CAACW,OAAN,IAAgBR,UAAhB,aAAgBA,UAAhB,uBAAgBA,UAAU,CAAES,UAA5B,CAAD,IAA2C,EAAtD,CAAD,CAAhC;AACA,UAAIC,YAAY,GAAGtC,MAAM,CAACuC,IAAP,CAAYC,CAAC,IAAIA,CAAC,CAACvD,IAAF,KAASkD,WAAT,IAAwBK,CAAC,CAACxD,IAAF,KAAS8C,WAAlD,CAAnB;;AACA,UAAGJ,OAAO,CAACe,SAAR,CAAkBC,QAAlB,CAA2B,aAA3B,CAAH,EAA6C;AACzChB,QAAAA,OAAO,CAACiB,KAAR,CAAcC,QAAd,GAAuB,UAAvB;AACArB,QAAAA,WAAW,GAAEG,OAAb;AACH;AACJ;AACJ,GAbD;;AAcA,WAASmB,SAAT,CAAmBpB,KAAnB,EAA8B;AAC1B,UAAMqB,KAAK,GAAGxB,QAAQ,CAACO,OAAvB;;AACA,QAAGN,WAAW,IAAIuB,KAAlB,EAAwB;AACpB,YAAMC,aAAa,GAAED,KAAK,CAACT,UAA3B;AACA,YAAMW,QAAQ,GAAEF,KAAK,CAACZ,SAAtB;AACA,YAAMe,cAAc,GAAGF,aAAa,GAAGD,KAAK,CAACI,WAAtB,GAAkC,EAAzD;AACA,YAAMC,WAAW,GAAEH,QAAQ,GAAGF,KAAK,CAACM,YAAjB,GAAgC,EAAnD;AACA7B,MAAAA,WAAW,CAACoB,KAAZ,CAAkBC,QAAlB,GAA2B,UAA3B;AACA,YAAOS,CAAC,GAAG5B,KAAK,CAACW,OAAN,GAAe,EAA1B;AACA,YAAOkB,CAAC,GAAG7B,KAAK,CAACQ,OAAN,GAAc,EAAzB,CAPoB,CAQpB;AACA;;AACA,UAAIoB,CAAC,GAACN,aAAN,EAAoB;AAChBxB,QAAAA,WAAW,CAACoB,KAAZ,CAAkBY,IAAlB,GAA0B,GAAER,aAAc,IAA1C;AACH,OAFD,MAEM,IAAGM,CAAC,GAACJ,cAAL,EAAoB;AACtB1B,QAAAA,WAAW,CAACoB,KAAZ,CAAkBY,IAAlB,GAAwB,GAAEN,cAAe,IAAzC;AACH,OAFK,MAED;AACD1B,QAAAA,WAAW,CAACoB,KAAZ,CAAkBY,IAAlB,GAAwB,GAAEF,CAAE,IAA5B;AACH;;AAED,UAAIC,CAAC,GAACN,QAAN,EAAe;AACXzB,QAAAA,WAAW,CAACoB,KAAZ,CAAkBa,GAAlB,GAAyB,GAAER,QAAS,IAApC;AACH,OAFD,MAEM,IAAGM,CAAC,GAACH,WAAL,EAAiB;AACnB5B,QAAAA,WAAW,CAACoB,KAAZ,CAAkBa,GAAlB,GAAuB,GAAEL,WAAY,IAArC;AACH,OAFK,MAED;AACD5B,QAAAA,WAAW,CAACoB,KAAZ,CAAkBa,GAAlB,GAAuB,GAAEF,CAAE,IAA3B;AACH;AACJ;AACJ;;AACD,WAASG,UAAT,CAAoBhC,KAApB,EAA+B;AACvB,UAAMG,UAAU,GAACN,QAAQ,CAACO,OAA1B;;AAEA,QAAGb,WAAW,KAAG,KAAjB,EAAuB;AACnBC,MAAAA,KAAK,CAAC,IAAD,CAAL,CADmB,CAEnB;AACA;AACA;;AACAjB,MAAAA,MAAM,CAAC0D,OAAP,CAAgBC,KAAD,IAAS;AACpB,cAAMC,QAAe,GAAG;AACpB7E,UAAAA,KAAK,EAAE4E,KAAK,CAAC5E,KADO;AAEpBC,UAAAA,IAAI,EAAE2E,KAAK,CAAC3E,IAFQ;AAGpBC,UAAAA,IAAI,EAAC0E,KAAK,CAAC1E,IAHS;AAIpBC,UAAAA,IAAI,EAACyE,KAAK,CAACzE,IAJS;AAKpBE,UAAAA,KAAK,EAACuE,KAAK,CAACvE;AALQ,SAAxB;AAMAQ,QAAAA,eAAe,CAACd,IAAhB,CAAqB8E,QAArB;AACH,OARD;AAUH;;AACD,QAAIC,SAAS,GAAG,KAAhB,CAnBuB,CAmBA;;AAIvB,QAAGjC,UAAH,EAAc;AAAA;;AACV,UAAIkC,OAAO,GAAGpF,YAAY,CAACqD,IAAI,CAACC,KAAL,CAAW,CAACP,KAAK,CAACQ,OAAN,IAAeL,UAAf,aAAeA,UAAf,uBAAeA,UAAU,CAAEM,SAA3B,CAAD,IAAyC,EAApD,CAAD,CAA1B,CADU,CAC4E;;AACtF,UAAI6B,OAAO,GAAGpF,cAAc,CAACoD,IAAI,CAACC,KAAL,CAAW,CAACP,KAAK,CAACW,OAAN,IAAgBR,UAAhB,aAAgBA,UAAhB,uBAAgBA,UAAU,CAAES,UAA5B,CAAD,IAA2C,EAAtD,CAAD,CAA5B;AACA,UAAI2B,SAAS,GAAGD,OAAO,GAAGD,OAA1B;AAIA,YAAMG,MAAM,mBAAC1C,WAAD,iDAAC,aAAa2C,aAA1B,CAPU,CAO6B;;AACvC,UAAI5B,YAAY,GAACtC,MAAM,CAACuC,IAAP,CAAYC,CAAC,IAAIA,CAAC,CAACvD,IAAF,MAASgF,MAAT,aAASA,MAAT,uBAASA,MAAM,CAAEE,EAAR,CAAW,CAAX,CAAT,KAA0B3B,CAAC,CAACxD,IAAF,KAASiF,MAAM,CAACE,EAAP,CAAU,CAAV,CAApD,CAAjB,CARU,CASV;;AAGA,UAAIC,aAAa,GAAGpE,MAAM,CAACuC,IAAP,CAAYC,CAAC,IAAIA,CAAC,CAACvD,IAAF,KAAS8E,OAAT,IAAoBvB,CAAC,CAACxD,IAAF,KAAS8E,OAA9C,CAApB;;AACA,UAAGxB,YAAH,EAAgB;AACZuB,QAAAA,SAAS,GAAG9D,OAAO,CAACsE,WAAR,CAAoBJ,MAApB,aAAoBA,MAApB,uBAAoBA,MAAM,CAAEE,EAA5B,EAAgCH,SAAhC,EAA2C1B,YAA3C,aAA2CA,YAA3C,uBAA2CA,YAAY,CAAEpD,IAAzD,EAA+DoD,YAA/D,aAA+DA,YAA/D,uBAA+DA,YAAY,CAAElD,KAA7E,EAAoFY,MAApF,CAAZ;AACH;;AACD,UAAG,CAAAsC,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEpD,IAAd,MAAqB,CAArB,IAA0B2E,SAA7B,EAAuC;AACnC,YAAGG,SAAS,KAAG,IAAZ,IAAoBH,SAAvB,EAAkC;AAC9BS,UAAAA,MAAM,CAAC,IAAD,CAAN;AACAnE,UAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AAEH,SAJD,MAIM,IAAG8D,SAAS,KAAG,IAAZ,IAAoBH,SAAvB,EAAiC;AACnCS,UAAAA,MAAM,CAAC,IAAD,CAAN;AACAnE,UAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AAEH,SAJK,MAIA,IAAG8D,SAAS,KAAG,IAAZ,IAAoBH,SAAvB,EAAiC;AACnCS,UAAAA,MAAM,CAAC,IAAD,CAAN;AACAnE,UAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AAEH,SAJK,MAIA,IAAG8D,SAAS,KAAG,IAAZ,IAAoBH,SAAvB,EAAiC;AACnCS,UAAAA,MAAM,CAAC,IAAD,CAAN;AACAnE,UAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AAEH;AACJ;;AACD,UAAGkE,aAAa,IAAIP,SAApB,EAA8B;AAC1B;AACA,cAAMU,YAAY,GAAG,CAAAH,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEnF,IAAf,IAAsBmF,aAAa,CAACpF,IAAzD;AACAiB,QAAAA,SAAS,CAAEuE,KAAD,IAAS;AACf,gBAAMC,cAAc,GAAGD,KAAK,CAACE,MAAN,CAAa,CAACC,OAAD,EAAUhB,KAAV,KAAkB;AAClD,kBAAMiB,WAAW,GAACjB,KAAK,CAAC1E,IAAN,GAAa0E,KAAK,CAAC3E,IAArC;;AAEA,gBAAG4F,WAAW,KAAGL,YAAjB,EAA8B;AAC1BI,cAAAA,OAAO,CAAC7F,IAAR,CAAa6E,KAAb;AACH;;AACD,mBAAOgB,OAAP;AACH,WAPsB,EAOpB,EAPoB,CAAvB;AAQAlG,UAAAA,SAAS,CAAC4C,IAAV;AAEA,iBAAOoD,cAAP;AACH,SAZQ,CAAT;AAaH;;AACDxE,MAAAA,SAAS,CAAE4E,IAAD,IAAQ;AACd,cAAM7E,MAAM,GAAC6E,IAAI,CAACC,GAAL,CAAUC,WAAD,IAAe;AAAA;;AACjC,gBAAMd,MAAM,oBAAC1C,WAAD,kDAAC,cAAa2C,aAA1B;;AACA,cAAGL,SAAS,IAAII,MAAb,IAAsBc,WAAW,CAAC9F,IAAZ,KAAmBgF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAzC,IAAyDY,WAAW,CAAC/F,IAAZ,KAAmBiF,MAAM,CAACE,EAAP,CAAU,CAAV,CAA/E,EAA4F;AACxF,gBAAIa,UAAU,GAAGf,MAAM,CAACE,EAAP,GAAYH,SAA7B;AACA3D,YAAAA,MAAM,CAAC,CAAC,GAAGD,eAAJ,EAAqB4E,UAArB,CAAD,CAAN,CAFwF,CAGxF;AACA;;AACAD,YAAAA,WAAW,CAAC/F,IAAZ,GAAiB8E,OAAjB;AACAiB,YAAAA,WAAW,CAAC9F,IAAZ,GAAiB8E,OAAjB;AACA5D,YAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AACH,WARD,MAQK;AAAA;;AACD,6BAAAqB,WAAW,UAAX,sDAAaoB,KAAb,CAAmBsC,cAAnB,CAAkC,KAAlC;AACA,6BAAA1D,WAAW,UAAX,sDAAaoB,KAAb,CAAmBsC,cAAnB,CAAkC,MAAlC;AACC;;AACLxG,UAAAA,SAAS,CAAC4C,IAAV;AACA,iBAAO0D,WAAP;AACH,SAhBY,CAAb;AAiBAxD,QAAAA,WAAW,GAAC,IAAZ;AACA,eAAOvB,MAAP;AACH,OApBQ,CAAT;AAwBP;AACA,GArLkC,CAsLvC;AACA;;;AACA,WAASsE,MAAT,CAAgBN,SAAhB,EAAkC;AAC9B,QAAIkB,aAAa,GAAE,EAAnB;AACA,QAAIC,aAAa,GAAC,EAAlB;AACA,QAAIC,aAAa,GAAC,EAAlB;AACA,QAAIC,aAAa,GAAC,EAAlB;;AACA,QAAGrB,SAAS,KAAG,IAAf,EAAoB;AAChBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH,KALD,MAKM,IAAGrB,SAAS,KAAG,IAAf,EAAoB;AACtBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH,KALK,MAKA,IAAGrB,SAAS,KAAG,IAAf,EAAoB;AACtBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH,KALK,MAKA,IAAGrB,SAAS,KAAG,IAAf,EAAoB;AACtBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH;;AACDpF,IAAAA,SAAS,CAAE4E,IAAD,IAAQ;AACd,YAAM7E,MAAM,GAAC6E,IAAI,CAACC,GAAL,CAAUC,WAAD,IAAe;AACjC,YAAGA,WAAW,CAAC9F,IAAZ,KAAmBiG,aAAa,CAAC,CAAD,CAAhC,IAAuCH,WAAW,CAAC/F,IAAZ,KAAmBkG,aAAa,CAAC,CAAD,CAA1E,EAA8E;AAC1EH,UAAAA,WAAW,CAAC/F,IAAZ,GAAiBmG,aAAa,CAAC,CAAD,CAA9B;AACAJ,UAAAA,WAAW,CAAC9F,IAAZ,GAAiBkG,aAAa,CAAC,CAAD,CAA9B;AACH,SAHD,MAGM,IAAGJ,WAAW,CAAC9F,IAAZ,KAAmBmG,aAAa,CAAC,CAAD,CAAhC,IAAuCL,WAAW,CAAC/F,IAAZ,KAAmBoG,aAAa,CAAC,CAAD,CAA1E,EAA8E;AAChFL,UAAAA,WAAW,CAAC/F,IAAZ,GAAiBqG,aAAa,CAAC,CAAD,CAA9B;AACAN,UAAAA,WAAW,CAAC9F,IAAZ,GAAiBoG,aAAa,CAAC,CAAD,CAA9B;AACH;;AACD,eAAON,WAAP;AACH,OATY,CAAb;AAUA,aAAO/E,MAAP;AACH,KAZQ,CAAT;AAcH;;AACD,WAASsF,UAAT,CAAoBtB,SAApB,EAAsC;AAClC,QAAIkB,aAAa,GAAE,EAAnB;AACA,QAAIC,aAAa,GAAC,EAAlB;AACA,QAAIC,aAAa,GAAC,EAAlB;AACA,QAAIC,aAAa,GAAC,EAAlB;;AACA,QAAGrB,SAAS,KAAG,IAAf,EAAoB;AAChBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH,KALD,MAKM,IAAGrB,SAAS,KAAG,IAAf,EAAoB;AACtBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH,KALK,MAKA,IAAGrB,SAAS,KAAG,IAAf,EAAoB;AACtBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH,KALK,MAKA,IAAGrB,SAAS,KAAG,IAAf,EAAoB;AACtBkB,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACAC,MAAAA,aAAa,GAAC,IAAd;AACH;;AACDpF,IAAAA,SAAS,CAAE4E,IAAD,IAAQ;AACd,YAAM7E,MAAM,GAAC6E,IAAI,CAACC,GAAL,CAAUC,WAAD,IAAe;AACjC;AACA,YAAGA,WAAW,CAAC9F,IAAZ,KAAmBiG,aAAa,CAAC,CAAD,CAAhC,IAAuCH,WAAW,CAAC/F,IAAZ,KAAmBkG,aAAa,CAAC,CAAD,CAA1E,EAA8E;AAC1EH,UAAAA,WAAW,CAAC/F,IAAZ,GAAiBmG,aAAa,CAAC,CAAD,CAA9B;AACAJ,UAAAA,WAAW,CAAC9F,IAAZ,GAAiBkG,aAAa,CAAC,CAAD,CAA9B;AACH,SAHD,MAGM,IAAGJ,WAAW,CAAC9F,IAAZ,KAAmBmG,aAAa,CAAC,CAAD,CAAhC,IAAuCL,WAAW,CAAC/F,IAAZ,KAAmBoG,aAAa,CAAC,CAAD,CAA1E,EAA8E;AAChFL,UAAAA,WAAW,CAAC/F,IAAZ,GAAiBqG,aAAa,CAAC,CAAD,CAA9B;AACAN,UAAAA,WAAW,CAAC9F,IAAZ,GAAiBoG,aAAa,CAAC,CAAD,CAA9B;AACH;;AACD,eAAON,WAAP;AACH,OAVY,CAAb;AAWA,aAAO/E,MAAP;AACH,KAbQ,CAAT;AAgBH,GA3QsC,CA4QvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,WAASuF,UAAT,CAAoBC,IAApB,EAA8B;AAC1BtE,IAAAA,OAAO,CAACZ,SAAS,GAAC,CAAX,CAAP;AAEAmF,IAAAA,UAAU,CAAC,MAAI;AACXC,MAAAA,aAAa,CAACF,IAAD,CAAb;AAEH,KAHS,EAGP,IAHO,CAAV;AAIA,UAAMrB,EAAE,GAAEqB,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAaA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAvB;AACA,UAAMG,KAAK,GAACH,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAaA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAzB;AACA,QAAII,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwB3B,EAAxB,CAAnB;AACA,QAAIH,SAAS,GAAE6B,QAAQ,CAACC,cAAT,CAAwBH,KAAxB,CAAf;;AACA,QAAGC,YAAY,IAAI5B,SAAnB,EAA6B;AACzB+B,MAAAA,OAAO,CAACC,GAAR,CAAYC,gBAAgB,CAACL,YAAD,CAAhB,CAA+BM,MAA3C;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAYC,gBAAgB,CAACjC,SAAD,CAAhB,CAA4BT,IAAxC;AAEH;AACJ;;AACD,WAASmC,aAAT,CAAuBF,IAAvB,EAAiC;AAC7B;AACA,QAAGxE,WAAH,EAAe;AACXf,MAAAA,SAAS,CAACL,eAAD,CAAT;AACAqB,MAAAA,KAAK,CAAC,KAAD,CAAL;AACArB,MAAAA,eAAe,GAAC,EAAhB;AACAS,MAAAA,MAAM,CAAC,EAAD,CAAN;AACH;;AACD5B,IAAAA,SAAS,CAAC4C,IAAV,GAR6B,CAS7B;;AAEA,QAAGmE,IAAI,CAAC,CAAD,CAAJ,KAAU,UAAb,EAAwB;AACpB;AACA3E,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAF,MAAAA,YAAY,CAAC,IAAD,CAAZ;AAEH,KALD,MAKM,IAAG6E,IAAI,CAAC,CAAD,CAAJ,KAAU,QAAb,EAAsB;AACxBlB,MAAAA,MAAM,CAACkB,IAAI,CAAC,CAAD,CAAL,CAAN;AACArF,MAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AACH,KAHK,MAGD;AACD;AACA,YAAM0B,UAAU,GAACN,QAAQ,CAACO,OAA1B;;AAEA,UAAGD,UAAH,EAAc;AAEV,YAAIwC,aAAa,GAAGpE,MAAM,CAACuC,IAAP,CAAYC,CAAC,IAAIA,CAAC,CAACvD,IAAF,KAASuG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAT,IAAuBhD,CAAC,CAACxD,IAAF,KAASwG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAjD,CAApB,CAFU,CAIV;;AACA,YAAGpB,aAAH,EAAiB;AACb;AACA,cAAI+B,KAAgB,GAAC;AAACxC,YAAAA,KAAK,EAAES,aAAR;AAAuBgC,YAAAA,UAAU,EAAE9F;AAAnC,WAArB;AACAG,UAAAA,QAAQ,CAACoE,IAAI,IAAE;AACX,mBAAO,CAAC,GAAGA,IAAJ,EAAUsB,KAAV,CAAP;AACH,WAFO,CAAR;AAGA,gBAAM5B,YAAY,GAAG,CAAAH,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEnF,IAAf,IAAsBmF,aAAa,CAACpF,IAAzD;AAEAiB,UAAAA,SAAS,CAAEuE,KAAD,IAAS;AACf,kBAAMC,cAAc,GAAGD,KAAK,CAACE,MAAN,CAAa,CAACC,OAAD,EAAUhB,KAAV,KAAkB;AAClD,oBAAMiB,WAAW,GAACjB,KAAK,CAAC1E,IAAN,GAAa0E,KAAK,CAAC3E,IAArC;;AAEA,kBAAG4F,WAAW,KAAGL,YAAjB,EAA8B;AAC1BI,gBAAAA,OAAO,CAAC7F,IAAR,CAAa6E,KAAb;AACH;;AACD,qBAAOgB,OAAP;AACH,aAPsB,EAOpB,EAPoB,CAAvB;AAQA,mBAAOF,cAAP;AACH,WAVQ,CAAT;AAWH;;AACDxE,QAAAA,SAAS,CAAE4E,IAAD,IAAQ;AACd,gBAAM7E,MAAM,GAAC6E,IAAI,CAACC,GAAL,CAAUC,WAAD,IAAe;AACjC,gBAAGA,WAAW,CAAC9F,IAAZ,KAAmBuG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAnB,IAAiCT,WAAW,CAAC/F,IAAZ,KAAmBwG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAvD,EAAkE;AAC9D,kBAAGT,WAAW,CAAC7F,IAAZ,IAAkB,CAAlB,KAAyBsG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,KAAY,GAAZ,IAAmBT,WAAW,CAAC3F,KAAZ,IAAmB,CAAvC,IAA8CoG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,MAAa,GAAb,IAAoBT,WAAW,CAAC3F,KAAZ,IAAmB,CAA7G,CAAH,EAAoH;AAChH2F,gBAAAA,WAAW,CAAC7F,IAAZ,GAAiB,CAAjB;AACA6F,gBAAAA,WAAW,CAAChG,KAAZ,GAAmB,mBAAnB;AACH;;AAEDgG,cAAAA,WAAW,CAAC/F,IAAZ,GAAiBwG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAjB;AACAT,cAAAA,WAAW,CAAC9F,IAAZ,GAAiBuG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAjB;AACArF,cAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AACH;;AACD,mBAAO6E,WAAP;AACH,WAZY,CAAb;AAaA,iBAAO/E,MAAP;AACH,SAfQ,CAAT;AAiBH;AACJ,KAlE4B,CAkE5B;;AAEJ,GAzWsC,CAyWtC;AACD;;;AACA,WAASqG,WAAT,GAAsB;AAClBnF,IAAAA,OAAO,CAACZ,SAAS,GAAC,CAAX,CAAP;AACAmF,IAAAA,UAAU,CAAC,YAAU,CACpB,CADS,EACR,GADQ,CAAV;AAEH;;AACD,WAASa,aAAT,GAAwB;AACpB,UAAMd,IAAI,GAAGzE,SAAS,CAACT,SAAS,GAAC,CAAX,CAAtB;AACA,UAAMsB,UAAU,GAACN,QAAQ,CAACO,OAA1B;AACApD,IAAAA,SAAS,CAAC4C,IAAV,GAHoB,CAIpB;AACA;;AACA,QAAGL,WAAH,EAAe;AACXf,MAAAA,SAAS,CAACL,eAAD,CAAT;AACAS,MAAAA,MAAM,CAAC,EAAD,CAAN;AACAY,MAAAA,KAAK,CAAC,KAAD,CAAL;AACArB,MAAAA,eAAe,GAAC,EAAhB;AACH,KAXmB,CAYpB;AACA;;;AACA,QAAGU,SAAS,KAAG,CAAZ,IAAiBA,SAAS,GAAG,CAAhC,EAAkC;AAC9BK,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAK,MAAAA,OAAO,CAAC,CAAD,CAAP;AACH,KAJD,MAIM,IAAGsE,IAAI,CAAC,CAAD,CAAJ,KAAU,QAAb,EAAsB;AACxBF,MAAAA,UAAU,CAACE,IAAI,CAAC,CAAD,CAAL,CAAV;AACArF,MAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AAEH,KAJK,MAID;AACD;AACA,UAAG0B,UAAH,EAAc;AACV3B,QAAAA,SAAS,CAAE4E,IAAD,IAAQ;AACd,gBAAM7E,MAAM,GAAC6E,IAAI,CAACC,GAAL,CAAUC,WAAD,IAAe;AACjC,gBAAGA,WAAW,CAAC9F,IAAZ,KAAmBuG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAnB,IAAiCT,WAAW,CAAC/F,IAAZ,KAAmBwG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAvD,EAAkE;AAC9DT,cAAAA,WAAW,CAAC/F,IAAZ,GAAiBwG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAjB;AACAT,cAAAA,WAAW,CAAC9F,IAAZ,GAAiBuG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAjB;AACArF,cAAAA,OAAO,CAACD,IAAI,KAAG,CAAP,GAAS,CAAT,GAAW,CAAZ,CAAP;AACH;;AACD,mBAAO6E,WAAP;AACH,WAPY,CAAb;AAQA,iBAAO/E,MAAP;AACH,SAVQ,CAAT;AAYA,YAAIuG,SAAS,GAAE/F,WAAW,CAAC+B,IAAZ,CAAiBiE,IAAI,IAAGA,IAAI,CAACJ,UAAL,KAAkB9F,SAAS,GAAC,CAApD,CAAf;;AACA,YAAIiG,SAAJ,EAAc;AACVtG,UAAAA,SAAS,CAAE4E,IAAD,IAAQ;AACd,mBAAO,CAAC,GAAGA,IAAJ,EAAU0B,SAAV,aAAUA,SAAV,uBAAUA,SAAS,CAAE5C,KAArB,CAAP;AACH,WAFQ,CAAT;AAGH;AACJ;AACR;AACI;;AAEL,MAAIb,KAAU,GAAC,EAAf;AACA,MAAI2D,OAAO,GAAC,CAAZ,CAhauC,CAiavC;AACA;;AAEA,OAAI,IAAI5H,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,CAAf,EAAkBA,CAAC,EAAnB,EAAsB;AAClB,SAAI,IAAI6H,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,CAAf,EAAkBA,CAAC,EAAnB,EAAsB;AAClB,UAAGA,CAAC,KAAG,CAAP,EAAS;AACLD,QAAAA,OAAO;AACV;;AACD,UAAI7D,QAAQ,GAAGjE,cAAc,CAAC+H,CAAD,CAAd,GAAoBhI,YAAY,CAACG,CAAD,CAA/C;AAEA,UAAIE,KAAK,GAAC,EAAV;AACAiB,MAAAA,MAAM,CAAC0D,OAAP,CAAe,UAASC,KAAT,EAAe;AAC1B;AACA;AACA,YAAGA,KAAK,CAAC1E,IAAN,KAAa2D,QAAQ,CAAC,CAAD,CAArB,IAA4Be,KAAK,CAAC3E,IAAN,KAAa4D,QAAQ,CAAC,CAAD,CAApD,EAAwD;AACpD7D,UAAAA,KAAK,GAAC4E,KAAK,CAAC5E,KAAZ,CADoD,CAEpD;AACH;AACJ,OAPD;AAQA+D,MAAAA,KAAK,CAAChE,IAAN,eAAW,QAAC,MAAD;AAAuB,QAAA,MAAM,EAAE2H,OAA/B;AAAwC,QAAA,KAAK,EAAE1H,KAA/C;AAAsD,QAAA,KAAK,EAAE6D;AAA7D,SAAaA,QAAb;AAAA;AAAA;AAAA;AAAA,cAAX;AACA6D,MAAAA,OAAO;AACV,KAlBiB,CAkBjB;;AACJ,GAvbsC,CAubtC;AAID;;;AAIA,sBACI;AAAA,4BACA;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,6BAIA;AAAK,QAAA,SAAS,EAAC,YAAf;AACI,QAAA,WAAW,EAAEhF,KAAK,IAAIoB,SAAS,CAACpB,KAAD,CADnC;AAEI,QAAA,WAAW,EAAEA,KAAK,IAAID,SAAS,CAACC,KAAD,CAFnC;AAGI,QAAA,SAAS,EAAEA,KAAK,IAAIgC,UAAU,CAAChC,KAAD,CAHlC;AAII,QAAA,GAAG,EAAEH,QAJT;AAAA,kBAKKwB;AALL;AAAA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA,YADA,eAeA;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BACA;AAAQ,QAAA,EAAE,EAAC,SAAX;AAAqB,QAAA,SAAS,EAAC,iBAA/B;AAAiD,QAAA,OAAO,EAAE,MAAI;AAACuD,UAAAA,WAAW;AAAIC,UAAAA,aAAa;AAAG,SAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAQ,QAAA,EAAE,EAAC,YAAX;AAAwB,QAAA,SAAS,EAAC,SAAlC;AAA4C,QAAA,OAAO,EAAE,MAAIK,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,eAGA;AAAQ,QAAA,EAAE,EAAC,SAAX;AAAqB,QAAA,SAAS,EAAC,iBAA/B;AAAiD,QAAA,OAAO,EAAE,MAAI;AAACtB,UAAAA,UAAU,CAACxE,SAAS,CAACT,SAAD,CAAV,CAAV;AAAiC,SAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHA;AAAA;AAAA;AAAA;AAAA;AAAA,YAfA,eAoBA,QAAC,KAAD;AACI,MAAA,IAAI,EAAEI,SADV;AAEI,MAAA,IAAI,EAAC,IAFT;AAGI,yBAAgB,+BAHpB;AAII,MAAA,QAAQ,MAJZ;AAAA,gBAMKE,UAAU,gBACX,QAAC,SAAD;AAAW,QAAA,UAAU,EAAED,YAAvB;AAAqC,QAAA,IAAI,EAAEb,KAAK,CAACgH;AAAjD;AAAA;AAAA;AAAA;AAAA,cADW,gBACmD,QAAC,SAAD;AAAW,QAAA,UAAU,EAAEnG,YAAvB;AAAqC,QAAA,IAAI,EAAC;AAA1C;AAAA;AAAA;AAAA;AAAA;AAPlE;AAAA;AAAA;AAAA;AAAA,YApBA;AAAA,kBADJ;AAiCH,C,CAAA;;;GAheQd,sB;;KAAAA,sB;AAkeT,eAAeA,sBAAf;AAEA,SAAQxB,SAAR,EAAmBC,KAAnB","sourcesContent":["import React, {useState, useEffect, useRef} from \"react\";\r\nimport { Modal} from 'react-bootstrap';\r\nimport GameModal from \"./Modal\";\r\nimport Square from \"./square\";\r\nimport gameRef from \"../game/legalmove\";\r\n\r\nenum pieceType {\r\n    PAWN,\r\n    KNIGHT,\r\n    BISHOP,\r\n    ROOK,\r\n    QUEEN,\r\n    KING    \r\n}\r\n\r\nenum Color{\r\n    WHITE,\r\n    BLACK\r\n}\r\n\r\ninterface Piece{\r\n    image: string\r\n    rank: string\r\n    file: string\r\n    type: pieceType\r\n    color: Color\r\n}\r\n\r\ninterface TakenPiece{\r\n    piece: any\r\n    moveNumber: number\r\n}\r\n\r\nlet gameBeginAudio = new Audio(\"/sound/start.mp3\");\r\nlet moveSound = new Audio('/sound/move_sound.mp3')\r\n\r\nconst verticalAxis = [\"8\",\"7\",\"6\",\"5\",\"4\", \"3\",\"2\",\"1\"]\r\nconst horizontalAxis = [\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\"]\r\n\r\nconst startingPieces: Piece[] = []\r\nfor(var i=0; i<8; i++){\r\n    startingPieces.push({image: \"pieces/Wpawn.png\", rank: \"2\", file: horizontalAxis[i], type: pieceType.PAWN, color: Color.WHITE});\r\n}\r\nfor(i=0; i<8; i++){\r\n    startingPieces.push({image: \"pieces/Bpawn.png\", rank: \"7\", file: horizontalAxis[i], type: pieceType.PAWN, color: Color.BLACK});\r\n}\r\n\r\nstartingPieces.push({image: \"pieces/Wrook.png\", rank: \"1\", file: \"a\", type: pieceType.ROOK, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Wrook.png\", rank: \"1\", file: \"h\", type: pieceType.ROOK, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Brook.png\", rank: \"8\", file: \"a\", type: pieceType.ROOK, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Brook.png\", rank: \"8\", file: \"h\", type: pieceType.ROOK, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Wknight.png\", rank: \"1\", file: \"b\", type: pieceType.KNIGHT, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Wknight.png\", rank: \"1\", file: \"g\", type: pieceType.KNIGHT, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Wbishop.png\", rank: \"1\", file: \"c\", type: pieceType.BISHOP, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Wbishop.png\", rank: \"1\", file: \"f\", type: pieceType.BISHOP, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Bknight.png\", rank: \"8\", file: \"b\", type: pieceType.KNIGHT, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Bknight.png\", rank: \"8\", file: \"g\", type: pieceType.KNIGHT, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Bbishop.png\", rank: \"8\", file: \"c\", type: pieceType.BISHOP, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Bbishop.png\", rank: \"8\", file: \"f\", type: pieceType.BISHOP, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Wqueen.png\", rank: '1', file: \"d\", type: pieceType.QUEEN, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Wking.png\", rank: '1', file: \"e\", type: pieceType.KING, color: Color.WHITE});\r\nstartingPieces.push({image: \"pieces/Bqueen.png\", rank: '8', file: \"d\", type: pieceType.QUEEN, color: Color.BLACK});\r\nstartingPieces.push({image: \"pieces/Bking.png\", rank: '8', file: \"e\", type: pieceType.KING, color: Color.BLACK});\r\n\r\n\r\nvar oldGamePosition: Piece[] = [];\r\nfunction ChessBoardMovesAlready(props: any){\r\n    \r\n    const referee = new gameRef();\r\n    const [pieces, setPieces] = useState<Piece[]>(startingPieces); \r\n    const [turn, setTurn] = useState(0);\r\n    const [userMovesEngine, setUME] = useState<String[]>([])\r\n    const [moveCount, setMoveCount] = useState(0);\r\n    const [takenPieces, setTaken]=useState<TakenPiece[]>([]);\r\n    //props for modal\r\n    const [modalOpen, setModalOpen] =useState(false);\r\n    const [before_end, setBeforeEnd]=useState(false);\r\n    function closeModal(){\r\n        setModalOpen(false)\r\n    }\r\n    const movesList = props.movesList\r\n    //says whether or not user moved a piece\r\n    //important for setting board back to old position\r\n    const [playerMoves, setPM] = useState(false);\r\n    //for after player moves set back turn\r\n\r\n    function setMove(moveNum: any){\r\n        setMoveCount(moveNum);\r\n        props.setMove(moveNum);\r\n    }\r\n    //passuser moves to the engine\r\n    useEffect(()=>{\r\n        props.passToEngine(userMovesEngine);\r\n        \r\n    }, );\r\n    useEffect(()=>{\r\n        gameBeginAudio.play();\r\n        props.passToEngine([]);\r\n    }, [])\r\n    \r\n    const boardRef = useRef<HTMLDivElement>(null);\r\n\r\n    let activePiece: HTMLElement | null = null;\r\n\r\n    const grabPiece = function(event: any){\r\n        const element = event.target;\r\n        //const currSquare = element.parentNode.id;\r\n        const chessboard = boardRef.current;\r\n        if (chessboard){\r\n            let currentRank = verticalAxis[Math.floor((event.clientY- chessboard?.offsetTop) / 94)];\r\n            let currentFile = horizontalAxis[Math.floor((event.clientX - chessboard?.offsetLeft) / 94)];\r\n            let currentPiece = pieces.find(p => p.file===currentFile && p.rank===currentRank);\r\n            if(element.classList.contains(\"chess-piece\")){\r\n                element.style.position=\"absolute\";\r\n                activePiece= element;\r\n            }\r\n        }\r\n    }\r\n    function movePiece(event: any){\r\n        const board = boardRef.current;\r\n        if(activePiece && board){\r\n            const boardSideLeft= board.offsetLeft;\r\n            const boardTop= board.offsetTop;\r\n            const boardSideRight = boardSideLeft + board.clientWidth-70;\r\n            const boardBottom =boardTop + board.clientHeight - 70;\r\n            activePiece.style.position=\"absolute\";\r\n            const  x = event.clientX -47;\r\n            const  y = event.clientY-47;\r\n            //series of if else if keeps piece movement within boards area\r\n            //1st if else if is horizontally and second is vertically\r\n            if( x<boardSideLeft){    \r\n                activePiece.style.left = `${boardSideLeft}px`;\r\n            }else if(x>boardSideRight){\r\n                activePiece.style.left=`${boardSideRight}px`;\r\n            }else{\r\n                activePiece.style.left=`${x}px`;\r\n            }\r\n\r\n            if( y<boardTop){    \r\n                activePiece.style.top = `${boardTop}px`;\r\n            }else if(y>boardBottom){\r\n                activePiece.style.top=`${boardBottom}px`;\r\n            }else{\r\n                activePiece.style.top=`${y}px`;\r\n            }\r\n        }\r\n    }\r\n    function placePiece(event: any){\r\n            const chessboard=boardRef.current;\r\n            \r\n            if(playerMoves===false){\r\n                setPM(true);\r\n                //pushing each piece into a new piece Array\r\n                //it stores the games position before the player moves the pieces. Required to put pieces back\r\n                //newArray=pieces won't work beauase it will not be a pass by reference not pass by value\r\n                pieces.forEach((piece)=>{\r\n                    const oldPiece: Piece = {\r\n                        image: piece.image,\r\n                        rank: piece.rank,\r\n                        file:piece.file,\r\n                        type:piece.type,\r\n                        color:piece.color}\r\n                    oldGamePosition.push(oldPiece);\r\n                })\r\n                \r\n            }\r\n            var validMove = false; //needed to check if a move is okay\r\n\r\n\r\n            \r\n            if(chessboard){\r\n                var newRank = verticalAxis[Math.floor((event.clientY- chessboard?.offsetTop) / 94)];  //this gets the new square based on where I release the mouse\r\n                var newFile = horizontalAxis[Math.floor((event.clientX - chessboard?.offsetLeft) / 94)];\r\n                var newSquare = newFile + newRank;\r\n\r\n\r\n\r\n                const parent=activePiece?.parentElement//needed to get original square. Need square to find the original piece on square\r\n                var currentPiece=pieces.find(p=> (p.file===parent?.id[0] && p.rank===parent.id[1]));\r\n                //var rightTurn = currentPiece?.color===turn; //checks if players turn\r\n\r\n                \r\n                var attackedPiece = pieces.find(p => p.file===newFile && p.rank===newRank);\r\n                if(currentPiece){\r\n                    validMove = referee.isValidMove(parent?.id, newSquare, currentPiece?.type, currentPiece?.color, pieces);\r\n                }\r\n                if(currentPiece?.type===5 && validMove){\r\n                    if(newSquare===\"g1\" && validMove ){\r\n                        castle(\"WK\");\r\n                        setTurn(turn===0?1:0);\r\n\r\n                    }else if(newSquare===\"c1\" && validMove){\r\n                        castle(\"WQ\");\r\n                        setTurn(turn===0?1:0);\r\n\r\n                    }else if(newSquare===\"g8\" && validMove){\r\n                        castle(\"BK\");\r\n                        setTurn(turn===0?1:0);\r\n\r\n                    }else if(newSquare===\"c8\" && validMove){\r\n                        castle(\"BQ\");\r\n                        setTurn(turn===0?1:0);\r\n\r\n                    }\r\n                }\r\n                if(attackedPiece && validMove){\r\n                    //console.log(\"here attacking\")\r\n                    const attackSquare = attackedPiece?.file + attackedPiece.rank;\r\n                    setPieces((value)=>{        \r\n                        const piecesMinusOne = value.reduce((results, piece)=>{\r\n                            const pieceSquare=piece.file + piece.rank;\r\n                            \r\n                            if(pieceSquare!==attackSquare){\r\n                                results.push(piece)\r\n                            }\r\n                            return results\r\n                        }, []as Piece[]);\r\n                        moveSound.play();\r\n\r\n                        return piecesMinusOne;\r\n                    })  \r\n                }\r\n                setPieces((prev)=>{\r\n                    const pieces=prev.map((selectPiece)=>{\r\n                        const parent=activePiece?.parentElement\r\n                        if(validMove && parent&& selectPiece.file===parent.id[0] && selectPiece.rank===parent.id[1]){\r\n                            var moveEngine = parent.id + newSquare;\r\n                            setUME([...userMovesEngine, moveEngine]);\r\n                            //if the moves valid take the piece on current parent square\r\n                            //then give that piece a new rank/ file\r\n                            selectPiece.rank=newRank;\r\n                            selectPiece.file=newFile;\r\n                            setTurn(turn===0?1:0);\r\n                        }else{\r\n                            activePiece?.style.removeProperty(\"top\");\r\n                            activePiece?.style.removeProperty(\"left\");\r\n                            }\r\n                        moveSound.play();\r\n                        return selectPiece;\r\n                    })\r\n                    activePiece=null;\r\n                    return pieces;\r\n                }\r\n                )\r\n               \r\n            \r\n        }\r\n        }\r\n    //Castle function basically moves two pieces the rook and king\r\n    //has to be a seperate function than normal one piece move functin\r\n    function castle(newSquare: string){\r\n        let oldKingSquare =\"\";\r\n        let newKingSquare=\"\";\r\n        let oldRookSquare=\"\";\r\n        let newRookSquare=\"\";\r\n        if(newSquare===\"WK\"){\r\n            oldKingSquare=\"e1\";\r\n            newKingSquare=\"g1\";\r\n            oldRookSquare=\"h1\";\r\n            newRookSquare=\"f1\";\r\n        }else if(newSquare===\"BK\"){\r\n            oldKingSquare=\"e8\";\r\n            newKingSquare=\"g8\";\r\n            oldRookSquare=\"h8\";\r\n            newRookSquare=\"f8\";\r\n        }else if(newSquare===\"BQ\"){\r\n            oldKingSquare=\"e8\";\r\n            newKingSquare=\"c8\";\r\n            oldRookSquare=\"a8\";\r\n            newRookSquare=\"d8\";\r\n        }else if(newSquare===\"WQ\"){\r\n            oldKingSquare=\"e1\";\r\n            newKingSquare=\"c1\";\r\n            oldRookSquare=\"a1\";\r\n            newRookSquare=\"d1\";\r\n        }\r\n        setPieces((prev)=>{\r\n            const pieces=prev.map((selectPiece)=>{\r\n                if(selectPiece.file===oldKingSquare[0] && selectPiece.rank===oldKingSquare[1]){\r\n                    selectPiece.rank=newKingSquare[1];\r\n                    selectPiece.file=newKingSquare[0];\r\n                }else if(selectPiece.file===oldRookSquare[0] && selectPiece.rank===oldRookSquare[1]){\r\n                    selectPiece.rank=newRookSquare[1];\r\n                    selectPiece.file=newRookSquare[0];\r\n                }\r\n                return selectPiece;\r\n            })\r\n            return pieces;\r\n        }\r\n        )\r\n    }\r\n    function castleBack(newSquare: string){\r\n        let oldKingSquare =\"\";\r\n        let newKingSquare=\"\";\r\n        let oldRookSquare=\"\";\r\n        let newRookSquare=\"\"; \r\n        if(newSquare===\"WK\"){\r\n            oldKingSquare=\"g1\";\r\n            newKingSquare=\"e1\";\r\n            oldRookSquare=\"f1\";\r\n            newRookSquare=\"h1\";\r\n        }else if(newSquare===\"BK\"){\r\n            oldKingSquare=\"g8\";\r\n            newKingSquare=\"e8\";\r\n            oldRookSquare=\"f8\";\r\n            newRookSquare=\"h8\";\r\n        }else if(newSquare===\"BQ\"){\r\n            oldKingSquare=\"c8\";\r\n            newKingSquare=\"e8\";\r\n            oldRookSquare=\"d8\";\r\n            newRookSquare=\"a8\";\r\n        }else if(newSquare===\"WQ\"){\r\n            oldKingSquare=\"c1\";\r\n            newKingSquare=\"e1\";\r\n            oldRookSquare=\"d1\";\r\n            newRookSquare=\"a1\";\r\n        }\r\n        setPieces((prev)=>{\r\n            const pieces=prev.map((selectPiece)=>{\r\n                //castle 1st if moves the king and second moves rook\r\n                if(selectPiece.file===oldKingSquare[0] && selectPiece.rank===oldKingSquare[1]){\r\n                    selectPiece.rank=newKingSquare[1];\r\n                    selectPiece.file=newKingSquare[0];\r\n                }else if(selectPiece.file===oldRookSquare[0] && selectPiece.rank===oldRookSquare[1]){\r\n                    selectPiece.rank=newRookSquare[1];\r\n                    selectPiece.file=newRookSquare[0];\r\n                }\r\n                return selectPiece;\r\n            })\r\n            return pieces;\r\n        }\r\n        )\r\n        \r\n    } \r\n    // function moveAnimation(oldSquare: string, newSquare: string){\r\n    //     let os = document.getElementById(oldSquare);\r\n    //     let ns = document.getElementById(newSquare);\r\n    //     var oldPiece = os?.getElementsByClassName(\"chess-piece\") as HTMLCollectionOf<HTMLElement>;;\r\n    //      oldPiece[0].style.position=\"absolute\";\r\n    //     console.log(oldPiece[0].style.position);\r\n    //     return true;\r\n    // }\r\n    function moveWithAn(move: any){\r\n        setMove(moveCount+1);            \r\n\r\n        setTimeout(()=>{\r\n            movePieceGame(move)\r\n  \r\n        }, 1500)\r\n        const id= move[0][0] + move[0][1]\r\n        const newid=move[1][0] + move[1][1]\r\n        let beforeSquare = document.getElementById(id)\r\n        let newSquare= document.getElementById(newid)\r\n        if(beforeSquare && newSquare){\r\n            console.log(getComputedStyle(beforeSquare).bottom)\r\n            console.log(getComputedStyle(newSquare).left)\r\n\r\n        }\r\n    }\r\n    function movePieceGame(move: any){\r\n        //set pieces to old game position from saved oldGamePosition variable\r\n        if(playerMoves){\r\n            setPieces(oldGamePosition);\r\n            setPM(false);\r\n            oldGamePosition=[];\r\n            setUME([]);\r\n        }\r\n        moveSound.play()\r\n        //if(movesList[moveCount+1][0]===\"gameOver\"){\r\n\r\n        if(move[0]===\"gameOver\"){\r\n            //end of game. BeforeEnd shows this is the end game modal\r\n            setBeforeEnd(true);\r\n            setModalOpen(true);\r\n\r\n        }else if(move[0]===\"castle\"){\r\n            castle(move[1]);\r\n            setTurn(turn===0?1:0);\r\n        }else{\r\n            //regular move not castle or game over\r\n            const chessboard=boardRef.current;\r\n            \r\n            if(chessboard){                \r\n                \r\n                var attackedPiece = pieces.find(p => p.file===move[1][0] && p.rank===move[1][1]);\r\n\r\n                //moveAnimation(move[0], newSquare);\r\n                if(attackedPiece){\r\n                    //console.log(\"here attacking\")\r\n                    var taken:TakenPiece={piece: attackedPiece, moveNumber: moveCount}\r\n                    setTaken(prev=>{\r\n                        return [...prev, taken]\r\n                    });\r\n                    const attackSquare = attackedPiece?.file + attackedPiece.rank;\r\n\r\n                    setPieces((value)=>{        \r\n                        const piecesMinusOne = value.reduce((results, piece)=>{\r\n                            const pieceSquare=piece.file + piece.rank;\r\n                            \r\n                            if(pieceSquare!==attackSquare){\r\n                                results.push(piece)\r\n                            }\r\n                            return results\r\n                        }, []as Piece[]);\r\n                        return piecesMinusOne;\r\n                    })                    \r\n                }\r\n                setPieces((prev)=>{\r\n                    const pieces=prev.map((selectPiece)=>{\r\n                        if(selectPiece.file===move[0][0] && selectPiece.rank===move[0][1]){\r\n                            if(selectPiece.type==0 && ((move[1][1]=='8' && selectPiece.color==0) || (move[1][1]==='1' && selectPiece.color==1))){\r\n                                selectPiece.type=4;\r\n                                selectPiece.image=(\"pieces/Bqueen.png\")\r\n                            }\r\n\r\n                            selectPiece.rank=move[1][1];\r\n                            selectPiece.file=move[1][0];\r\n                            setTurn(turn===0?1:0);\r\n                        }\r\n                        return selectPiece;\r\n                    })\r\n                    return pieces;\r\n                }\r\n                )\r\n            }\r\n        }//else close. else meaning it isn't a castle move\r\n    \r\n    }//movePieceGame close\r\n    //called with backbutton moves back a game move\r\n    function setbackMove(){\r\n        setMove(moveCount-1);\r\n        setTimeout(function(){\r\n        },200);\r\n    }\r\n    function movePieceBack(){\r\n        const move = movesList[moveCount-1];\r\n        const chessboard=boardRef.current;\r\n        moveSound.play();\r\n        //first checks if user moved pieces from game.\r\n        //same as move forward function\r\n        if(playerMoves){\r\n            setPieces(oldGamePosition);\r\n            setUME([]);\r\n            setPM(false);\r\n            oldGamePosition=[];\r\n        } \r\n        //set the move count back to do the opposite move\r\n        //function is almost the same as forward function but new and old squares flipped\r\n        if(moveCount===0 || moveCount < 0){\r\n            setModalOpen(true);\r\n            setBeforeEnd(false);\r\n            setMove(0);\r\n        }else if(move[0]===\"castle\"){\r\n            castleBack(move[1]);\r\n            setTurn(turn===0?1:0);\r\n\r\n        }else{\r\n            //not reverting a castle or going back from 0. normal  back move    \r\n            if(chessboard){\r\n                setPieces((prev)=>{\r\n                    const pieces=prev.map((selectPiece)=>{\r\n                        if(selectPiece.file===move[1][0] && selectPiece.rank===move[1][1]){\r\n                            selectPiece.rank=move[0][1];\r\n                            selectPiece.file=move[0][0];\r\n                            setTurn(turn===0?1:0);\r\n                        }\r\n                        return selectPiece;\r\n                    })\r\n                    return pieces;\r\n                }\r\n                )\r\n                var tookPiece= takenPieces.find(take=>(take.moveNumber===moveCount-1));\r\n                if (tookPiece){\r\n                    setPieces((prev)=>{\r\n                        return [...prev, tookPiece?.piece];\r\n                    })\r\n                }  \r\n            }      \r\n    }\r\n        }\r\n    \r\n    let board: any=[];\r\n    let counter=0;\r\n    //nested loop to create board w/ black/white squares\r\n    //j is x and i is Y\r\n    \r\n    for(var i=0; i<8; i++){\r\n        for(var j=0; j<8; j++){\r\n            if(j===0){\r\n                counter++;\r\n            }\r\n            let position = horizontalAxis[j] + verticalAxis[i]; \r\n\r\n            let image=\"\";\r\n            pieces.forEach(function(piece){\r\n                //if a pieces position is equal to a square pass that piece into square creation\r\n                //image is either \"\" blank or has the URL of a piece.image\r\n                if(piece.file===position[0] && piece.rank===position[1]){\r\n                    image=piece.image;\r\n                    //return;\r\n                }\r\n            })\r\n            board.push(<Square key={position} number={counter} image={image} sText={position} />);\r\n            counter++;      \r\n        }//ends second for loop\r\n    }//ends first for loop\r\n\r\n\r\n\r\n    //putting pieces in the squares\r\n\r\n\r\n    \r\n    return(\r\n        <>\r\n        <div className=\"boardDiv\">\r\n        {/* <MoveButton color={buttonClass()} turn={moveTurn}/> */}\r\n\r\n\r\n        <div className=\"chessBoard\"\r\n            onMouseMove={event => movePiece(event)}\r\n            onMouseDown={event => grabPiece(event)}\r\n            onMouseUp={event => placePiece(event)}\r\n            ref={boardRef}>\r\n            {board}\r\n        </div>      \r\n        </div>\r\n\r\n        {/* KChad to use arrow function because onclick won't work with type void */}\r\n        <div className=\"belowButtons\">\r\n        <button id=\"backBtn\" className=\"backBtn moveBtn\" onClick={()=>{setbackMove(); movePieceBack()}}>Move back</button>\r\n        <button id=\"boardReset\" className=\"moveBtn\" onClick={()=>window.location.reload()}>Reset Board</button>\r\n        <button id=\"nextBtn\" className=\"nextBtn moveBtn\" onClick={()=>{moveWithAn(movesList[moveCount])}}>Next Move</button>\r\n        </div>\r\n        <Modal \r\n            show={modalOpen}\r\n            size=\"lg\"\r\n            aria-labelledby=\"contained-modal-title-vcenter\"\r\n            centered\r\n        >\r\n            {before_end ? \r\n            <GameModal closeModal={setModalOpen} text={props.gameover}/>: <GameModal closeModal={setModalOpen} text=\"Can't move back from move 0\"/>}\r\n        </Modal>\r\n        </>\r\n        )\r\n\r\n}//closes chessboard\r\n\r\nexport default ChessBoardMovesAlready;\r\n\r\nexport {pieceType, Color};\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}